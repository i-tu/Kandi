	\documentclass[finnish,12pt]{article}
	\usepackage{aaltothesis}
	
%       \usepackage[T1]{inputenc}


	%% Use this if you run latex and use eps-format pictures
	%\usepackage[dvips]{graphicx}
	\usepackage[pdftex]{graphicx} 
	\makeindex
	\usepackage[pdfpagemode=None,colorlinks=true,urlcolor=red,linkcolor=blue,
citecolor=black,pdfstartview=FitH]{hyperref}

	%% Use this if you do not like hyperref package - this defines url environment and formats it correctly
	%\usepackage{url}

	% Math stuff
	\usepackage{amsfonts,amssymb,amsbsy}

	\usepackage{setspace}
	\onehalfspacing
	
  \usepackage{lmodern}
	
	% Layout
	\setlength{\hoffset}{-1in}
	\setlength{\oddsidemargin}{35mm}
	\setlength{\evensidemargin}{25mm}
	\setlength{\textwidth}{15cm}
	\setlength{\voffset}{-1in}
	\setlength{\headsep}{7mm}
	\setlength{\headheight}{1em}
	\setlength{\topmargin}{25mm-\headheight-\headsep}
	\setlength{\textheight}{23cm}

	
	\begin{document}
	
	\bibliographystyle{unsrt}

	\university{Aalto-yliopisto}
	\school{Sähkötekniikan korkeakoulu}

	\faculty{Automaatio- ja systeemitekniikan laitos}
	\degreeprogram{Automaatio- ja systeemitekniikka}
	\univdegree{BSc}
	\author{Ian Tuomi}
	\thesistitle{Automaatiokaavioiden generointi}
%	\place{Espoo}
%	\date{5.12.2012}
%	\supervisor{DI Marek Matusiak}
%	\instructor{DI Mika Strömman}
%	\uselogo{red}{!}{tkk}
%	\makecoverpage

	\keywords{Automaatiojärjestelmä, Automatisoitu suunnittelu, ohjelmoitava logiikka, PLC, IEC 61131, FBD, graafinpiirto, suunnattu graafi}
	
	\begin{abstractpage}[finnish]
  
Tämän tutkimuksen kohteena on järjestelmän ohjauslogiikan formaalin kuvauksen
muuntaminen standardeita noudattavaksi logiikkakaavioksi.
  
	\end{abstractpage}

	\newpage
	\vspace{10cm}
	\mysection{Esipuhe}

%Haluan kiittää seuraavia ihmisiä joita ilman en olisi onnistunut tässä työssä.

%Ohjaajaani Mika Strömmania hyvistä huomioista,  asiallisesta palautteesta ja
%skarpista ohjauksesta.

%Kandiryhmäni jäseniä Lauri Vepsäläistä, Heikki 'Taffis' Tahvanaista, Panu
%Kauppista, Peter 'Bembu'  Kronströmiä ja Lauri Andleria.

%Kandikurssin järjestäjää 

%Petri Kokkoa ja Pekka Niemistä ideoinnista ja suunnannäyttämisestä.

%Aalto- yliopiston henkilökuntaa hyvästä työstä.
%Vanhempiani tuesta ja kannustuksesta.

	\vspace{5cm}

Otaniemi, 16.3.2010

	\vspace{5mm}
	{\hfill Ian Tuomi \hspace{1cm}}

	\newpage

%	\addcontentsline{Sisällysluettelo}

	\tableofcontents


%% Käsitteet
	\mysection{Käsitteet}

	\begin{tabular}{ll}
Solmu       & Distributed Control System \\
%	     	      & Hajautettu ohjausjärjestelmä
Lanka        & Distributed Control System \\
%	     	      & Hajautettu ohjausjärjestelmä
	\end{tabular}

%% Lyhenteet
	\mysection{Lyhenteet}

	\begin{tabular}{ll}
DCS        & Distributed Control System \\
%	     & Hajautettu ohjausjärjestelmä
%FBD         & Function Block Diagram, IEC 61131-3 -standardin määrittelemä logiikkaohjelmointikieli
%IEC          & Internation Electrotechnical Commission
%PLC         & Programmable Logic Circuit \\
%	      & Ohjelmoitava logiikkapiiri

	\end{tabular}

	\cleardoublepage
	\storeinipagenumber
	\pagenumbering{arabic}
	\setcounter{page}{1}

% Kandi %

	\section{Johdanto}
	\thispagestyle{empty}

Teollisuuden automaatiojärjestelmän suunnittelutyön tulos koostuu kaavioista -
laajan järjestelmän tapauksessa jopa tuhansista sellaisista. Kaaviot muodostavat
kuvauksen joka mahdollistaa tehtaan toteutuksen, käyttöönoton ja ylläpidon.
Kaavioiden piirtäminen käsin on suurissa projekteissa työlästä ja tehotonta.
Nykyaikaisessa tehdassuunnittelussa ongelma korostuu.
Ratkaisuista on tullut monimutkaisempia ja laatu- ja joustavuusvaatimukset ovat kasvaneet.
Lisäksi suunnitteluprojektien toteutusaikavaatimukset ovat jatkuvasti lyhentyneet.
\cite{RefWorks:41}

Tämä suunnitteluprosessia on pyritty tehostamaan automatisoiduilla
suunnittelun apuvälineillä. Suunnittelumetodiikat eivät ole
ilmeisistä standardoimiseduista huolimatta yhtenäistyneet, ja yhteistyö alan
tutkimuksessa on vähäistä. Vaikka lähestymistavat ovat vaihtelevia, on
tehdassuunnittelussa kuitenkin nähtävissä yhtenäinen siirtymä kohti 
tietomalleja. Automaatiosuunnittelun kannalta tämä tarkoittaa sitä, että
suunnittelujärjestelmään syntyy projektin edetessä tehtaan
tietomalli johon tehtaan kaikki sähköistys ja instrumentointi
automaatiojärjestelmineen ja kenttälaitteineen on merkitty. Erilaiset kaaviot
voidaan tuottaa suoraan tietomallin sisältävästä tietokannasta.

Tietomalliin perustuva lähestymistapa vaatii tietomallin laajuuden ja rajoitukset
määrittelevän metamallin. Tämä malli ohjaa ja määrittää suunnittelun kohteen lisäksi
myös yleisesti suunnittelutöiden kulkua.

Tämän tutkimuksen kohteena on hajautetun ohjausjärjestelmän logiikan
tietomallin muuntaminen standardeja noudattavaksi logiikkakaavioksi.
Logiikkakaaviot ovat tapa pelkistää syöttöjen ja lähtöjen välillä vallitseva
logiikka. Logiikkakaavio on määritelty yksiselitteisesti ja on tulkittavissa
suunnatuksi graafiksi, jolloin algoritmillisen graafinpiirron tuloksia voidaan
hyödyntää.

Algoritmillinen graafipiirto on perusteellisesti tutkittu ala, jonka tuloksia
voidaan käyttää kaikenlaisten suunnattujen kaavioiden piirtoon. Työssä esitellään
Sugiyaman et. al. \cite{RefWorks:9} esittämään hierarkiseen lähestymistapaan
perustuvan algoritmin jonka avulla lopullinen kaavio piirretään.


	\clearpage
	\section{Tehtaan mallit}

Tehdasmalli on kuvaus, joka mahdollistaa tehtaan toteutuksen, käyttöönoton ja
ylläpidon. Se on tietomalli, joka kuvaa laajuudestaan riippuen tehtaan toimintaa,
sen prosessia, organisaatiota, ihmisiä ja näitten aktiviteetteja. Tehdasmalli
koostuu pohjimmiltaan tehdasobjekteista, niiden ominaisuuksista ja niiden
välisistä relaatioista. \cite{RefWorks:41}

Suunnittelijoilla on työtehtävistään riippuen erilaisia tarpeita tehdasmallin
suhteen. Työn kohde on monitahoinen eikä mikään yksi malli pysty kattamaan
kaikkia suunniteltavan järjestelmän näkymiä. Tehdasta tulee kuvata useilta eri
näkökannoilta erilaisilla tarkkuuksilla kunkin näkymän vaatimuksien mukaisesti.
Tehdasmalliin kuuluu siis useita malleja, jotka yhdessä muodostavat kokonaisen
systeemin.

Jokaisella mallilla on myös metamalli. Se määrittelee millaisia objekteja malli voi sisältää, mitä ominaisuuksia sillä voi tai täytyy olla ja millaisia yhteyksiä mallin objektien välillä on.
Metamallin loogiset riippuvuudet määrittelevät suunnittelun työtapoja ja järjestystä.
Ne kuvaavat millaiset tietomallit ovat suunnittelujärjestelmän kannalta hyväksyttäviä tehdasmalleja.
Ne määräävät myös suunnittelujärjestelmän laajuuden. Metamallin määritteleminen tekee suunnittelutyön tuloksesta ennakoitavan ja mahdollistaa suunnittelun apuvälineiden kehittämisen. Suunnittelutyön formalisoimisella myös suljetaan pois eriäviä tapoja kuvata tehdasta ja mahdollistetaan formalismiin perustuvat työkalut ja suunnittelukäytännöt. Tällaisia ovat esimerkiksi uudelleenkäytettävää koodia sisältävät kirjastot ja erilaiset mallimuunnokset.

Suunnittelutyössä käytettävät metamallit valitaan siten, etteivät ne ole
ristiriidassa ja muodostavat yhdessä toisiaan täydentävän kokonaisuuden.
Tällöin metamallien konfiguraatio muodostaa itsessään mallin.

Ohjelmointikirjastot sisältävät tyyppiratkaisuja yleisiin ongelmiin.
Näitä voidaan sitten suunnittelutyön yhteydessä käyttää tarvittaessa hyväksi ja täydentää.
Mallimuunnoksessa jokin malli muunnetaan toiseksi.

Valmiiden grafiikkakirjastojen käyttöä on tutkinut Kääriäinen, jonka mukaan
työssä .

	\subsection{Automaatiojärjestelmän näkymät}

Teollisuuden hajautettujen ohjausjärjestelmien suunnittelussa on havaittu
tarpeelliseksi ainakin kolme näkymää \cite{RefWorks:38}: funktionaalinen näkymä, fyysinen näkymä sekä ohjelmistonäkymä.

Funktionaalinen näkymä määrittelee säätöjärjestelmän toiminnan tavalla, joka toteutettuna täyttää sille asetetut vaatimukset. Se on formaali spesifikaatio eli kuvaus ohjelmistosta tai laitteistosta, joka voidaan sen avulla toteuttaa. Se kuvaa mitä järjestelmän tulisi tehdä, muttei välttämättä kuinka järjestelmän tulisi se toteuttaa.

Tätä näkymää määritettäessä voivat eri alojen suunnittelijat osallistua työhön ilman
tuntemusta instrumentoinnista tai ohjelmistokehityksestä. Kun päätökset on tehty
abstraktilla tasolla, voidaan hankinnat räätälöidä sen mukaisesti ja tulos
toteuttaa tehokkaasti.
Tällaisen määrittelyn avulla on mahdollista käyttää formaaleja verifiointimenetelmiä joitten avulla
voidaan osoittaa, että järjestelmän suunnitelma toteuttaa sille asetetut vaatimukset.
Näin suunnitelman oikeellisuus voidaan osoittaa ennen mittavia investointeja toteutukseen.
Funktionaalisen näkymän suunnitteluprosessin tuloksena on usein
PI-kaavio joka yleensä toimii esisuunnittelutietona muille näkymille.

Fyysiseen näkymään suunnitellaan järjestelmän johdotukset, kaapelit, kenttäväylät,
ohjauskeskukset, toimilaitteiden sijainnit sekä ylipäänsä kaikki mitä vaaditaan 
järjestelmän fyysiseen käyttöönottoon.

Ohjelmistonäkymä kattaa funktionaalisen suunnittelun toteutuksen ohjelmamuodossa.
Ohjelmistonäkymän toteuttamisen ei enää pitäisi olla suunnittelutyötä.
Ohjelmistototeutus jää suunnitteluprosessissa harvinaisen vähäiselle formaaliuden asteelle, vaikka pyrkimyksiä siihen suuntaan on ollut.

Projektin edetessä konseptista toteutukseksi huomataan, että suunnittelutyön aikana tuotettua tietoa on kahdenlaista. Työllä on lopputulos, joka lähetetään asiakkaalle. Se sisältää tehtaan virallisen dokumentaation. Lisäksi suunnittelijoille jää ajatuksia, kokemuksia ja päättelyketjuja jotka eivät sinänsä päädy lopulliseen tuotokseen, mutta jonka ideat. 

Suunnittelutyön tavoitteen toteuttava dokumentti saattaa olla ainoa joka näkee päivänvalon.
Tässä työssä tarkastellaan tapoja joilla suunnittelutyön tuottamia malleja voidaan muuntaa toisiksi, käyttökelpoisiksi malleiksi kuten logiikkadiagrammeiksi.

	\subsection{Logiikan kuvaukset}

	Ohjauslogiikalla on viime kappaleessa kuvatun näkymäjaon mukaan ainakin kaksi kuvausta: funktionaalinen kuvaus ja toteutettu kuvaus.
	
	Funktionaalinen kuvaus voi olla formaali tai epäformaali riippuen työssä käytetyistä menetelmistä. 	
	
		\subsubsection{Formaali logiikan kuvaus}
	
Suunniteltu logiikka tallennetaan jaettuun suunnittelumalliin, johon kaikilla järjestelmän suunnittelijoilla on yhteys.
Tapa jolla logiikka tallennetaan täytyy olla yhdenmukainen, jotta suunnittelutyössä voidaan tehdä tehokasta yhteistyötä.
% Logiikan suunnittelijat usein tuottavat epäformaalia tietoa. [?]

Lisäksi kuvauksen tulee olla formaali jotta logiikkaa voitaisiin käsitellä ja muuntaa algoritmillisesti.

Formaalilla tarkoitetaan tietynlaista, tarkkaan määritetyn syntaksin mukaista kuvausata.
Tällöin tulee mahdolliseksi toteuttaa helposti tietoa käsitteleviä muunnosalgoritmeja.

Muunnoksella tarkoitetaan jonkin tiedon kuvauksen muuttamista toiseksi kuvaukseksi.

Suunnitteluohjelmistot ovat vähintään yhteensopivia itsensä kanssa.
Työpaikalla jaettujen yhtenäisten suunnittelun apuvälineiden avulla.
Näitä ovat käytännössä tietokoneella käytettävät suunnitteluohjelmistot.

Jos halutaan yhteensopivuutta eri ohjelmien kesken joudutaan.

Logiikkaohjelman formaaliksi kuvaukseksi on ehdotettu PLCopen-standardia.
Se määrittelee XML-kuvauksen standardin IEC 61131-3 mukaisista ohjelmointikielistä.
Se on myös AutomationML-standardin hyväksymä esitys.
AutomationML on useiden \footnote{ABB, KUKA, Rockwell Automation, Siemens, netAllied, Zühlke, Karlsruhen Yliopisto ja Magdeburgin Yliopisto} automaatioalan yritysten ajama standardi, joka kuvaa sisällyttää automaatio-objektiin kaikki sen eri näkymät standardilla tavalla.

Kun logiikkakuvauksen muoto on määritelty tarkasti, voidaan määritelmän mukaisesti laadittu logiikkakuvaus muuntaa määritelmään nojaavien sääntöjen perusteella.
Monet automaatiologiikan suunnitteluohjelmistot pystyvät muuntamaan käyttämänsä kuvauksen PLCopen-muotoiseksi tiedoksi, jolloin suunnittelutietoa voidaan siirtää eri järjestelmien kesken.

PLCopen -standardin mukainen logiikan XML-esitys voi sisältää toimilohkon toiminnallisuuden kannalta välttämättömien asioiden lisäksi toimilohkon sijainnin, koon ja jopa lankojen reititykset.
PLCopen -standardin mukainen esitys voidaan tällöin laatia siten, että se on tuotettavan kaavion asettelun kannalta täysin yksiselitteinen.

Tällaista esitystä voidaan silloin pitää dokumentaation lopullisena muotona.


	\subsubsection{Logiikkadiagrammit}

% IEC 61804, dokumentoinnin standardit.

Hajautetun ohjausjärjestelmän logiikan suunnittelulle ja toteutukselle ei ole laajassa käytössä olevaa standardia, pikemminkin joukko standardeja joita käytetään vaihtelevasti.

Suunnitteluohjelmistojen valmistajat myös jättävät usein standardinmukaiseksi kutsutuista ohjelmistoista standardin ominaisuuksia toteuttamatta.\cite{RefWorks:42}
Tämä johtuu standardinmukaisuuden määritelmästä: ohjelma on standardinmukainen, jos se toteuttaa standardista osan, ja mainitsee mitä se jättää toteuttamatta. 

IEC~61131-3 on avoin standardi joka määrittelee automaatiojärjestelmän ohjelmoinimenetelmät ja
 pyrkii olemaan riittävän joustava mihin tahansa tarkoitukseen. Se sisältää 4+1 eri
ohjelmointikieltä, joista tässä työssä käsitellään erityisesti FBDtä.

Logiikkadiagrammit pelkistävät syöttöjen ja lähtöjen välisen logiikan
yksinkertaiseksi ja intuitiiviseksi esitykseksi. Vaikka ohjausjärjestelmän
ohjelmointi toteutettaisiinkin muunlaisella esityksellä, esimerkiksi
tikapuukaaviolla, on silti usein helpompaa ymmärtää ohjelman rakenne
logiikkadiagrammien avulla. Lisäksi logiikkadiagrammit helpottavat tehtaan
toiminnan ymmärrystä suunnittelu- ja rakennusvaiheen lisäksi tehtaan ylläpidon
ja huollon yhteydessä ja ovat siksi tärkeä osa tehtaan lopullista
dokumentaatiota.

Toimilohkot kuvaavat toisistaan erillisiä itsenäisiä laskennallisia yksiköitä
ja niitten relaatioita toisiinsa. Toimilohko voi tilastaan riippuen lähettää
tapahtumia jotka vaikuttavat muitten blokkien toimintaan. Sen tekemien
laskutoimitusten tulos riippuu sen vasemmalta puolelta tulevista
syöttötiedoista ja sen suorittaman laskennan tulokset lähetetään blokin oikealta puolelta.
Toisiinsa liitetyt funktioblokit muodostavat verkon, joka määrittelee laajemman toiminnallisuuden.

% Toimintakaavio määrittelee ohjausjärjestelmän toimintoja. Se tavallisesti valmistellaan järjestelmän suunnittelun varhaisessa vaiheessa prosessikaaviosta. Toimintakaaviota pidetään ajantasaisena järjestelmän suunnittelun edetessä. Se toimii suunnittelun apuna ja on lopulta osa lopullisen järjestelmän ohjeistusta.

	\clearpage
	\section{Hierarkinen graafinpiirto}
	
% http://www.cs.brown.edu/~rt/gdhandbook/

Hierarkisen lähestymistavan kerrostettujen suunnattujen graafien piirtämiseen
esittivät Sugiyama et. al vuonna 1981 \cite{RefWorks:9}. Tämä lähestymistapa on
osoittautunut tehokkaaksi ja on ollut jatkokehityksen- ja tutkimuksen kohteena
\cite{RefWorks:28}.

Hierarkinen lähestymistapa koostuu seuraavista eesta:
\begin{enumerate}
  \item Syklien poisto
  \item Kerrostus
  \item Risteysten vähentäminen
  \item Poikittainen asettelu
\end{enumerate}

Lisäksi piirrettävän graafin täytyy olla etukäteen valiidisti muotoiltu ja syklitön.

Automaatiokaavioiden suoritusjärjestys etenee standardin IEC 61131-3 mukaan
vasemmalta oikealle. Lisäksi toimilohkoa ei ajeta ennen kuin kaikki sitä edeltävät toimilohkot on suoritettu.
Keskinäisen suoritusjärjestyksen täytyy myös tulla esille toteuttavassa ohjelmistossa.
Suoritusjärjestys kulkee usein ylhäältä alas, mutta tätä ei voi olettaa aina todeksi.

Suoritusjärjestysvaatimus asettaa toteutukselle rajoituksia.
Jos niitä ei oteta huomioon, saattaa graafin algoritmillinen piirto johtaa vääränlaiseen kaavioon.

Mahdollisten takaisinkytkentöjen tapauksessa vaaditaan huolellisuutta, jottei syklien poistovaiheessa kaavion järjestys muutu.

Työvaiheista kerrostus ja risteyksien vähennysvaihe saattavat muuttaa suoritusjärjestystä.
Tällöin algoritmin toimintaa pitää yksinkertaisesti rajoittaa järjestysherkkien blokkien osalta.
Koska algoritmit ovat heuristisia, ovat siihen tehtävät yksinkertaiset rajoitukset helppoja toteuttaa.

		\subsection{Syklien poisto}

Jos graafissa on syklejä, eli graafi ei ole suunnattu, käännetään syklin aiheuttavien lankojen suunta ja tehdyt muutokset merkitään muistiin.
Syklin aiheuttavat langat ovat takaisinkytkentöjä. Ne tunnistetaan 
Graafi pystytään suuntaamaan oikein, kun tunnetaan graafissa ensimmäisenä ajettavat solmut.
Graafinpiirron lopuksi syklit käännetään takaisin oikein päin.

		\subsection{Kerrostus}

Kerrostetuksen graafin tulee olla olla kompakti.
Tämä tarkoittaa että sen leveys ja pituus ovat pieniä ja kerrosten välinen etäisyys on vakio.
Käytännössä rajoituksena toimii tarkastelutavasta riippuen näyttöpääte tai paperi, jolle graafi on tarkoitus tulostaa.

Graafin pituuden alaraja on sen sisältämän pisimmän yhtenäisen ketjun pituus. Tarkastelemalla tätä pituutta saadaan kuva lopullisen kuvan leveydestä.

Erilaisilla kerrostusmenetelmillä graafin pituus voidaan minimoida leveyden kustannuksella tai siitä voidaan tehdä mahdollisimman kapea pituuden kustannuksella.

Sekä leveyden että pituuden minimointi samanaikaisesti on rinnastettavissa multiprosessoriajastusongelmaan ja on siten NP-täydellinen ongelma. \cite{RefWorks:39}
Multiprosessoriongelmaa varten suunniteltu algoritmi, Coffman-Graham-kerrostusmenetelmä tarjoaa tällöin ratkaisun tähän ongelmaan.

		\subsection{Risteyksien vähentäminen}

Lankojen risteysten määrä on osoittautunut olemaan suurin yksittäinen tekijä graafin luettavuuden kannalta. \cite{RefWorks:47}
Risteysmäärän vähentäminen on tällöin mille tahansa luettavuutteen tähtäävälle asettelualgoritmille tärkeä tavoite.

Graafin kokonaisristeysmäärän vähentäminen ei perustu solmujen tarkkoihin sijainteihin, vaan niitten keskinäiseen järjestykseen. Tämä tarkoittaa sitä, että ongelma on siis luonteeltaan kombinatorinen eikä geometrinen, mikä huomattavasti yksinkertaistaa ongelman ratkaisemista.
Tästä helpotuksesta huolimatta kyseessä on NP-täydellinen ongelma siinäkin tapauksessa että kerroksia no vain kaksi. \cite{RefWorks:40}

Lähestymistapoja risteyksien vähentämiseen on vierekkäisten noodien paikkojen
vaihtelu keskenään sekä mediaanimenetelmä, jossa noodi asetetaan paikalle, joka
on siihen yhtyneiden solmujen puolivälissä.

%Tähän se väikkäri myös! (P. Eades, ”Heuristics for Reducing crossings in
%2-layered networks”, E. Mäkinen, ”experiments of drawing 2-level hierarchical
%graphs”, M. Jünger, ”2-layer straightline crossing minimization: Perf…” )

Monet ovat tutkineet erilaisia risteysalgoritmeja.
Yhtä selkeästi parasta menetelmää ei ole kuitenkaan löytynyt.
Sen sijaan paras lähestymistapa on osoittautunut algoritmeja yhdisteleväksi heuristiseksi hybridialgoritmiksi. [?]

Tässä menetelmässä solmut uudelleenjärjestetään joka iteraation yhteydessä mediaanimenetelmällä.
Sen jälkeen luodaan joukko lähes identtisiä järjestelyitä joissa esiintyy paikallisia transpositioita.
Lopulta valitaan paras tulos seuraavaa iteraatiota varten.
Ratkaisua voisi luonnehtia geneettiseksi algoritmiksi.

%Optimizing Automatic Layout for Data Flow Diagrams, 2011, Diploma thesis,
%Christian-Albrechts-Universität zu Kiel, Department of Computer Science

		\subsection{Poikittainen asettelu}

Jokainen kulma langassa aiheuttaa ylimääräisen rasitteen ihmisen hahmotuskyvylle. \cite{RefWorks:47} Asettelualgoritmin tulee tällöin pyrkiä minimoimaan lankojen kulmat.
Asettelun merkitys korostuu kun lankoja on paljon.
Solmujen poikittaisen asettelun avulla solmujen välisten lankojen käännösten määrää pyritään vähentämään jotta kaavion luettavuus paranee.
Koska risteysten määrä riippyy solmujen keskinäisestä järjestyksestä ja risteysten vähentämisvaiheessa saavutettu  kombinatorinen ratkaisu säilyy, ei risteysten määrä muutu poikittaisasetteluvaiheessa.

Poikittaiseen asetteluun ????

	\clearpage
	\section{Menetelmät ja esimerkki}

		\subsection{Kaavioiden tuottaminen}

Käytännön toteutuksia hierarkisesta graafinpiirtomenetelmästä on useita
(viittaa: graphviz, tulip, kieler)
An open graph visualization system and its applications to software engineering
(2000) 

Automatic generation of PLC automation projects

from component-based models
Elisabet Estévez
Käytännönläheinen selostus siitä, kuinka aiempaa teoriaa sovelletaan.

		\subsection{Kaavioiden tuottaminen}
			\subsubsection{Vertaillut vaihtoehdot}
	
Funktioblokkien editointiin on olemassa useita työkaluja.
Rockwell Automationin ilmainen funktioblokkieditori, FBDK on tutkimuksessa
laajassa käytössä.
FBDK ei kuitenkaan tarjoa tapoja muuttaa kaavion asettelua algoritmillisesti.
FBench on avoimen lähdekoodin standardimukainen ohjelmisto, joka kuitenkin
kärsii samoista puutteista kuin FBDK.
PROFACTORin kehittämä 4DIAC tarjoaa standardeja noudattavan funktioblokkieditorin.
Se ei kuitenkaan mahdollista blokkien välisten lankojen reitittämistä.
ISaGRAF ja NxtControl ovat kaupallisesti tuotettuja ohjelmistoja joita ei valitettavasti voitu työtä varten arvioida.

Kaavioiden tuottamista 

			\subsubsection{KIELER}

Koeohjelmistoksi valittiin --- 
Kerrotaan tarkemmin ohjelmistosta jolla koe on suoritettu

		\subsection{Tulosten arviointiperusteet}

Lankojen risteämismäärien minimointi !
Ortogonaalisuus!
Graph Layout Aesthetics in UML Diagrams: User Preferences

The Aesthetics of Graph Visualization

	\clearpage
	\section{Tulokset}
	
Olemme osoittaneet yhteyden graafiteorian suunnatuilla puilla ja
logiikkadiagrammeilla ja näyttäneet miten graafipiirtoalgoritmeja voidaan
käyttää automaatiokaavioiden generointiin.
Tapa X on kivempi kuin tapa Y.

	\section{Yhteenveto ja tulevaisuudennäkymät}

Tehtaan automaatiosuunnittelun yhtenäistämiseksi on vuosien varrella esitetty akateemisissa piireissä
runsaasti ehdotuksia. Nämä jäävät usein abstraktille, suunnittelijat vieraannuttavalle tasolle.
Nykyhetken suurimpana haasteena ei ole, mikä on oikea tapa hahmottaa järjestelmä, vaan pikemmin
miten asia voidaan toteuttaa.

Tämä kandidaatintyö on pyrkinyt tarjoamaan konkreettisen ratkaisun konkreettiseen suunnittelutyön ongelmaan, graafinpiirtoon. 


\clearpage
\addcontentsline{toc}{section}{Viitteet}

\bibliography{kandi}
%\makeindex
\end{document}